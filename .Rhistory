if(!require("osmdata")) install.packages("osmdata")
library(osmdata)
citation("osmdata")
if(!require("osmdata")) install.packages("osmdata")
library(osmdata)
citation("osmdata")
city = "Yerevan"
aua <- c(40.19316854628843, 44.50449984955174)
## Request traffic signals in Yerevan
q <- getbb(city) %>%
opq() %>%
add_osm_feature("highway", "traffic_signals")
#### READ OSM DATA AS LIST IN R
signals <- osmdata_sf(q)
signals
signals
signals$osm_points
distances = c(1:length(signals$osm_points$osm_id))
########## DISTANCE FROM AUA to
for(i in 1:length(distances)){
distances[i] = distm(aua, c(signals$osm_points$geometry[[i]][1], signals$osm_points$geometry[[i]][2]), fun = distGeo)
}
if(!require("osmdata")) install.packages("osmdata")
if(!require("tidyverse")) install.packages("tidyverse")
if(!require("sf")) install.packages("sf")
if(!require("ggmap")) install.packages("ggmap")
library(osmdata)
library(sf)
library(tidyverse)
library(ggmap)
citation("osmdata")
city = "Yerevan"
aua <- c(40.19316854628843, 44.50449984955174)
## Request traffic signals in Yerevan
q <- getbb(city) %>%
opq() %>%
add_osm_feature("highway", "traffic_signals")
#### READ OSM DATA AS LIST IN R
signals <- osmdata_sf(q)
signals
signals$osm_points
distances = c(1:length(signals$osm_points$osm_id))
########## DISTANCE FROM AUA to
for(i in 1:length(distances)){
distances[i] = distm(aua, c(signals$osm_points$geometry[[i]][1], signals$osm_points$geometry[[i]][2]), fun = distGeo)
}
distances[i] = distm(aua, c(signals$osm_points$geometry[[i]][1], signals$osm_points$geometry[[i]][2]), fun = distGeo)
library(geosphere)
if(!require("geosphere")) install.packages("geosphere")
library(geosphere)
citation("osmdata")
city = "Yerevan"
aua <- c(40.19316854628843, 44.50449984955174)
q <- getbb(city) %>%
opq() %>%
add_osm_feature("highway", "traffic_signals")
signals <- osmdata_sf(q)
signals
signals$osm_points
distances = c(1:length(signals$osm_points$osm_id))
########## DISTANCE FROM AUA to
for(i in 1:length(distances)){
distances[i] = distm(aua, c(signals$osm_points$geometry[[i]][1], signals$osm_points$geometry[[i]][2]), fun = distGeo)
}
min(distances)
sum(distances < 1000)
sum(distances < 10000)
distances
max(distances)
sum(distances)
sum(distances[ distances < 10000])
sum(distances[ distances < 100000])
sum(distances[ distances < 1000000])
sum(distances[ distances < 600000])
sum(distances[ distances < 400000])
sum(distances[ distances < 500000])
sum(distances[ distances < 570000])
sum(distances[ distances < 590000])
sum(distances[ distances < 600000])
max(distances)
primary <- osmdata_sf(q2)
q2 <- getbb(city) %>%
opq() %>%
add_osm_feature("highway", "primary")
primary <- osmdata_sf(q2)
q2 <- getbb(city) %>%
opq() %>%
add_osm_feature("highway", "primary")
primary <- osmdata_sf(q2)
lines_primary <- st_transform(primary$osm_lines$geometry, 4269)
## ## ##
POINT_AUA <- as.data.frame(rbind(aua))
names(POINT_AUA)[1] = "lon1"
names(POINT_AUA)[2] = "lat1"
POINT_AUA <- st_as_sf(POINT_AUA, coords = c("lon1","lat1"))
POINT_AUA <- st_set_crs(POINT_AUA, 4269)
###### --------- ###
min(st_distance(POINT_AUA$geometry, lines_primary))
ggmap(yerevan_map) +
geom_sf(data = signals$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
labs(x="",y="")
yerevan_map <- get_map(getbb("Yerevan"), maptype = "toner-background")
ggmap(yerevan_map) +
geom_sf(data = signals$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
labs(x="",y="")
ggmap(yerevan_map) +
geom_sf(data = signals$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
geom_sf(data = lines_primary$osm_lines,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
labs(x="",y="")
yerevan_map <- get_map(getbb("Yerevan"), maptype = "toner-background")
ggmap(yerevan_map) +
geom_sf(data = signals$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
geom_sf(data = lines_primary$osm_lines,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
labs(x="",y="")
ggmap(yerevan_map) +
geom_sf(data = signals$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
geom_sf(data = primary$osm_lines,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
labs(x="",y="")
yerevan_map <- get_map(getbb("Yerevan"), maptype = "satellite")
q <- getbb("Yerevan") %>%
opq() %>%
add_osm_feature("amenity", "cinema")
str(q)
cinema <- osmdata_sf(q)
cinema
yerevan_map <- get_map(getbb("Yerevan"), maptype = "toner-background")
ggmap(yerevan_map) +
geom_sf(data = cinema$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .5,
size = 4,
shape=21) +
labs(x="",y="")
ggmap(yerevan_map) +
geom_sf(data = cinema$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .7,
size = 7,
shape=21) +
labs(x="",y="")
ggmap(yerevan_map) +
geom_sf(data = cinema$osm_points,
inherit.aes = FALSE,
colour = "#238443",
fill = "#004529",
alpha = .7,
size = 7,
shape=21) +
labs(x="Cinemas",y="")
